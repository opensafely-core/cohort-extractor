/*                                cmd

	Base class for command parsing and processing
*/
*! version 1.0.0  30jul2002

version 8

class {
	string command
	string if
	string in
	class  wgttype wgt_type
	string wgt_exp
	string varlist
	string options

} , inherit(object)

/* -------------------------------------------------------------------------*/

program define new

	.parse `0'
end


/* -------------------------------------------------------------------------*/
/*
	Parse the command
*/

program define parse

	gettoken cmd 0 : 0 , parse(" , [({")
	if "`cmd'" == "if" || "`cmd'" == "in" {
		local 0 `cmd' `0'
	}
	else	.command = "`cmd'"

	syntax [anything] [fw aw pw iw] [if] [in] [, *]

	.varlist = "`anything'"
	.if = "`if'"
	.in = "`in'"
	.wgt_exp = "`exp'"
	.wgt_type.set "`weight'"
	.options = `"`options'"'

end


/* -------------------------------------------------------------------------*/
/*
	Run the command
*/

program define run

	if "`.command'" == "" { 
		exit 
	}

	if "`.wgt_exp'" != "" {
		local wgtopt [`.wgt_type.setting'`wgt_exp']
	}
	`.command' `.varlist' `.if' `.in' `wgt_opt', `.options'
end


